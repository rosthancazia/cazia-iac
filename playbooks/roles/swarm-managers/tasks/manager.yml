---
    - name: ğŸ” Check if Swarm has already been initialized
      community.docker.docker_swarm_info:
      register: swarm_status

 # 4. Juntar Managers SecundÃ¡rios (AÃ§Ã£o no grupo 'swarm_managers', exceto o lÃ­der)
    - name: ğŸ¤ Join secondary Managers to the Swarm
      community.docker.docker_swarm:
        state: join
        join_token: "{{ hostvars[groups['swarm_managers'][0]]['swarm_tokens']['swarm_info']['join_tokens']['manager'] }}"
        remote_addr: "{{ groups['swarm_managers'][0] }}"
      when:
        - inventory_hostname != groups['swarm_managers'][0]
        - not swarm_status.swarm_info.node_id
